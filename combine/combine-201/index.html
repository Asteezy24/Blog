<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Swift Refresher"/><link rel="canonical" href="https://swiftrefresher.com/combine/combine-201"/><meta name="twitter:url" content="https://swiftrefresher.com/combine/combine-201"/><meta name="og:url" content="https://swiftrefresher.com/combine/combine-201"/><title>Combine 201: Diving a little deeper | Swift Refresher</title><meta name="twitter:title" content="Combine 201: Diving a little deeper | Swift Refresher"/><meta name="og:title" content="Combine 201: Diving a little deeper | Swift Refresher"/><meta name="description" content="Taking our combine knowledge a little further"/><meta name="twitter:description" content="Taking our combine knowledge a little further"/><meta name="og:description" content="Taking our combine knowledge a little further"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Swift Refresher"/></head><body class="bg-white font-sans leading-normal tracking-normal"><div class="pb-16"><nav class="fixed z-10 bg-gray-900 p-4 mt-0 w-full overflow-auto scrolling-touch"><div class="container mx-auto flex items-center"><div class="flex-shrink-0 text-white font-extrabold"><a class="flex text-white text-base no-underline hover:text-white hover:no-underline" href="/"><span class="block md:hidden md:w-auto pl-1">üèù</span><span class="hidden md:block w-0 md:w-auto pl-1">Swift Refresher</span></a></div><div class=" flex flex-no-wrap pl-4 text-sm"><ul class="list-reset flex justify-between items-center"><li class="mr-2"><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-2" href="/">HOME</a></li><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-2 whitespace-no-wrap" href="/leetcode">LEETCODE</a></li><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-2 whitespace-no-wrap" href="/ios-fundamentals">IOS-FUNDAMENTALS</a></li><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-2 whitespace-no-wrap" href="/SwiftUI">SWIFTUI</a></li><li><a class="inline-block py-2 px-2 text-white no-underline hover:underline whitespace-no-wrap" href="/combine">COMBINE</a></li><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-2 whitespace-no-wrap" href="/about">ABOUT</a></li></ul></div></div></nav></div><div class="text-center pt-16 md:pt-32"><p class="text-xs md:text-sm text-casper-blue font-bold">22 AUGUST 2022<span class="text-gray-900 px-1">/</span><a href="/tags/swiftui">SWIFTUI</a>, <a href="/tags/combine">COMBINE</a></p><h1 class="font-bold break-normal text-3xl md:text-5xl max-w-6xl mx-auto">Combine 201: Diving a little deeper</h1></div><div class="container max-w-5xl mx-auto "><div class="mx-0 sm:mx-6"><main class="bg-white w-full p-8 md:p-24 text-gray-800 leading-normal"><article class="prose prose-sm sm:prose-xl break-words"><h1>Combine 201: Diving a little deeper</h1><p>We got familiar with combine in our <a href="/combine/intro-to-combine">Combine 101 Article</a>, so now it is time to further our knowledge a bit with some deeper Combine principles.</p><p>As a refresher, Publishers publish values to objects that subscribe to the data. These objects are called Subscribers. One thing we didn't touch on a lot though, is how simple swift allows our Publisher/Subscriber relationship to be.</p><p>Let's say for example we have a Publisher, and we want to extrapolate, or mutate some data from our publishing stream. We could do something like this:</p><pre><code><div class="highlight"><span></span><span class="kd">let</span> <span class="nv">publisher</span> <span class="p">=</span> <span class="n">Just</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>

<span class="n">publisher</span><span class="p">.</span><span class="n">sink</span><span class="p">(</span><span class="n">receiveCompletion</span><span class="p">:</span> <span class="p">{</span> <span class="kc">_</span> <span class="k">in</span> <span class="p">},</span> <span class="n">receiveValue</span><span class="p">:</span> <span class="p">{</span> <span class="n">values</span> <span class="k">in</span>
    <span class="k">for</span> <span class="n">number</span> <span class="k">in</span> <span class="n">values</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">2</span> <span class="p">==</span> <span class="mi">0</span> <span class="p">{</span> <span class="c1">// check if the number is even, if it is, print it!</span>
            <span class="bp">print</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">})</span>
</div></code></pre><p>In the above code, we are printing all even numbers from the array of numbers published by our Publisher. But with the Combine Library, swift makes this much more simple! We can combine (get it üòé) multiple publishers together as long as they have matching same input &amp; output values. So our above code turns into this:</p><pre><code><div class="highlight"><span></span><span class="kd">let</span> <span class="nv">publisher</span> <span class="p">=</span> <span class="n">Just</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>

<span class="kd">let</span> <span class="nv">output</span> <span class="p">=</span> <span class="n">publisher</span>
    <span class="p">.</span><span class="bp">map</span> <span class="p">{</span> <span class="nv">$0</span><span class="p">.</span><span class="bp">filter</span> <span class="p">{</span> <span class="nv">$0</span> <span class="o">%</span> <span class="mi">2</span> <span class="p">==</span> <span class="mi">0</span>  <span class="p">}</span> <span class="p">}</span>
    <span class="p">.</span><span class="n">sink</span><span class="p">(</span><span class="n">receiveValue</span><span class="p">:</span> <span class="p">{</span> <span class="bp">print</span><span class="p">(</span><span class="nv">$0</span><span class="p">)</span> <span class="p">})</span>
</div></code></pre><p>When this code is ran we have our same logic. We receive an array of values from the Publisher, filter on them to find the even numbers, and then print the result. In this case we use the map operator on our defined Publisher. This function is called an operator on a Publisher, and these operators can be chained together to make some really cool &amp; clean code. Let's go over a few common operators.</p><h2>Combine Operators</h2><p>So we already went over <strong>.map()</strong> and it works exactly like map does in the Swift foundational library. We use it to map over the list of elements and transform the element as needed. Let's go over some of the most common operators available to us.</p><h3>dropFirst</h3><p>The first common operator we will be covering is <code>dropFirst</code>. Just as its name suggests, it will drop the first value the publisher receives, and will continue publishing all values after that. We can also specify how many preceding values we ignore by passing an integer as a parameter into <code>dropFirst(_)</code></p><pre><code><div class="highlight"><span></span><span class="kd">let</span> <span class="nv">publisher</span> <span class="p">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">],</span> <span class="kc">nil</span><span class="p">,</span> <span class="kc">nil</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">]].</span><span class="n">publisher</span>

<span class="kd">let</span> <span class="nv">output</span> <span class="p">=</span> <span class="n">publisher</span>
    <span class="p">.</span><span class="n">compactMap</span> <span class="p">{</span> <span class="nv">$0</span> <span class="p">}</span>
    <span class="p">.</span><span class="n">flatMap</span><span class="p">({</span> <span class="nv">$0</span><span class="p">.</span><span class="n">publisher</span> <span class="p">})</span>
    <span class="p">.</span><span class="bp">dropFirst</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="p">.</span><span class="n">sink</span><span class="p">(</span><span class="n">receiveValue</span><span class="p">:</span> <span class="p">{</span> <span class="bp">print</span><span class="p">(</span><span class="nv">$0</span><span class="p">)</span> <span class="p">})</span>
    
<span class="c1">// 5, 6, 7</span>
</div></code></pre><p>In this example we dropped both 1 &amp; 4 from the stream.</p><h3>compactMap</h3><p>As you can imagine based on it's predecessor, compact map will return a list of non-nil values if we give the publisher a list of Optional values, like an array of [Int?] for example.</p><pre><code><div class="highlight"><span></span><span class="kd">let</span> <span class="nv">publisher</span> <span class="p">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="kc">nil</span><span class="p">,</span> <span class="kc">nil</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="kc">nil</span><span class="p">].</span><span class="n">publisher</span>

<span class="kd">let</span> <span class="nv">output</span> <span class="p">=</span> <span class="n">publisher</span>
    <span class="p">.</span><span class="n">compactMap</span> <span class="p">{</span> <span class="nv">$0</span> <span class="p">}</span>
    <span class="p">.</span><span class="n">sink</span><span class="p">(</span><span class="n">receiveValue</span><span class="p">:</span> <span class="p">{</span> <span class="bp">print</span><span class="p">(</span><span class="nv">$0</span><span class="p">)</span> <span class="p">})</span>

<span class="c1">// 1, 4, 5, 6, 7</span>
</div></code></pre><h3>flatMap</h3><p>flatMap will concatenate all of the nested elements of a sequence into one 'flat' sequence. This works well when dealing with an array of array's.</p><pre><code><div class="highlight"><span></span><span class="kd">let</span> <span class="nv">publisher</span> <span class="p">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">],</span> <span class="kc">nil</span><span class="p">,</span> <span class="kc">nil</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">]].</span><span class="n">publisher</span>

<span class="kd">let</span> <span class="nv">output</span> <span class="p">=</span> <span class="n">publisher</span>
    <span class="p">.</span><span class="n">compactMap</span> <span class="p">{</span> <span class="nv">$0</span> <span class="p">}</span>
    <span class="p">.</span><span class="n">flatMap</span><span class="p">({</span> <span class="nv">$0</span><span class="p">.</span><span class="n">publisher</span> <span class="p">})</span>
    <span class="p">.</span><span class="n">sink</span><span class="p">(</span><span class="n">receiveValue</span><span class="p">:</span> <span class="p">{</span> <span class="bp">print</span><span class="p">(</span><span class="nv">$0</span><span class="p">)</span> <span class="p">})</span>
    
<span class="c1">// 1, 4, 5, 6, 7</span>
</div></code></pre><h3>contains</h3><p>Just like the Swift <strong>contains</strong> function commonly found on sequences, the Combine library sequence will return a published boolean if the value it receives contains a specific value.</p><pre><code><div class="highlight"><span></span><span class="kd">let</span> <span class="nv">publisher</span> <span class="p">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">],</span> <span class="kc">nil</span><span class="p">,</span> <span class="kc">nil</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">]].</span><span class="n">publisher</span>

<span class="kd">let</span> <span class="nv">output</span> <span class="p">=</span> <span class="n">publisher</span>
    <span class="p">.</span><span class="n">compactMap</span> <span class="p">{</span> <span class="nv">$0</span> <span class="p">}</span>
    <span class="p">.</span><span class="n">flatMap</span><span class="p">({</span> <span class="nv">$0</span><span class="p">.</span><span class="n">publisher</span> <span class="p">})</span>
    <span class="p">.</span><span class="bp">contains</span><span class="p">(</span><span class="k">where</span><span class="p">:</span> <span class="p">{</span> <span class="nv">$0</span> <span class="p">==</span> <span class="mi">5</span> <span class="p">})</span>
    <span class="p">.</span><span class="n">sink</span><span class="p">(</span><span class="n">receiveValue</span><span class="p">:</span> <span class="p">{</span> <span class="bp">print</span><span class="p">(</span><span class="nv">$0</span><span class="p">)</span> <span class="p">})</span>

<span class="c1">// true</span>
</div></code></pre><p>From our earlier example, our publisher is emitting the 5 value, so our publisher would return true.</p><h3>first</h3><p>Here we pass the closure some predicate to look for in our sequence, and return the first value to satisfy our defined predicate.</p><pre><code><div class="highlight"><span></span><span class="kd">let</span> <span class="nv">publisher</span> <span class="p">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">],</span> <span class="kc">nil</span><span class="p">,</span> <span class="kc">nil</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">]].</span><span class="n">publisher</span>

<span class="kd">let</span> <span class="nv">output</span> <span class="p">=</span> <span class="n">publisher</span>
    <span class="p">.</span><span class="n">compactMap</span> <span class="p">{</span> <span class="nv">$0</span> <span class="p">}</span>
    <span class="p">.</span><span class="n">flatMap</span><span class="p">({</span> <span class="nv">$0</span><span class="p">.</span><span class="n">publisher</span> <span class="p">})</span>
    <span class="p">.</span><span class="bp">first</span> <span class="p">{</span> <span class="nv">$0</span> <span class="p">==</span> <span class="mi">5</span> <span class="p">}</span>
    <span class="p">.</span><span class="n">sink</span><span class="p">(</span><span class="n">receiveValue</span><span class="p">:</span> <span class="p">{</span> <span class="bp">print</span><span class="p">(</span><span class="nv">$0</span><span class="p">)</span> <span class="p">})</span>
</div></code></pre><p>In this example we look for the first even value, which is 4 in our case.</p><p>There are tons of Publisher operators out there, so our list just touches the tip of the iceberg! I would suggest checking out the Apple documentation for a comprehensive list of available operators. This brings us to our next Combine topic...</p><h2>AnyCancellable's</h2><p>Swift's <strong>Cancellable</strong> type is foundational to how we use combine, and for reactive principles as a whole. Ideally if we have a stream of information being published, there is a chance we will want to cancel this stream of info after a given time.</p><p>Let's start at the bottom. Swift gives us a <code>Cancellable</code> protocol we can conform to, if we want an activity that supports cancellation. The protocol has support for a function called <strong>cancel()</strong> which from Apple: "frees up any allocated resources. It also stops side effects such as timers, network access, or disk I/O.". Ok Cool. We can support a cancellation function, that frees up resources, but what does that mean for us?</p><p>Apple also gives us an <strong>AnyCancellable</strong> type, which is a type-erased, Cancellable conforming, object. This object executes a closure on cancellation. So essentially when we go to create an AnyCancellable, we can initialize it with some work to do, when it finally cancels. From the Apple documentation, "An AnyCancellable instance automatically calls cancel() when deinitialized". So this is interesting, when the object is deallocated from memory, the object will call <strong>cancel()</strong> on itself, and thus the closure we initialized it with. Ok, that makes sense.</p><p>So if we piece this together, we can safely assume the purpose of <strong>AnyCancellable</strong> is to hold a reference to the subscription somewhere other than the subscription itself. If our object we retain the subscription on gets deallocated, our <strong>AnyCancellable</strong> will also get deallocated and thus will call <strong>cancel()</strong> on itself. This will then free up all resources held by the subscription.</p><p>So in summary, when we subscribe to a publisher using a built-in function like <strong>sink</strong> or <strong>assign</strong>, the function returns us an <strong>AnyCancellable</strong>. This <strong>AnyCancellable</strong> type will free up all resources whenever it is deallocated. And we must retain this <strong>AnyCancellable</strong> in our parent object because we do not want our subscriptions to get automatically deallocated whenever we leave the scope of their creation!!</p><p>It might be easier to see in code:</p><pre><code><div class="highlight"><span></span><span class="kd">class</span> <span class="nc">ViewModel</span> <span class="p">{</span>
    <span class="kd">init</span><span class="p">(){}</span>
    
    <span class="kd">func</span> <span class="nf">doSomeWork</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Timer</span>
            <span class="p">.</span><span class="n">publish</span><span class="p">(</span><span class="n">every</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">on</span><span class="p">:</span> <span class="n">RunLoop</span><span class="p">.</span><span class="n">main</span><span class="p">,</span> <span class="k">in</span><span class="p">:</span> <span class="p">.</span><span class="k">default</span><span class="p">)</span>
            <span class="p">.</span><span class="n">autoconnect</span><span class="p">()</span>
            <span class="p">.</span><span class="n">sink</span> <span class="p">{</span> <span class="n">date</span> <span class="k">in</span>
                <span class="bp">print</span><span class="p">(</span><span class="n">date</span><span class="p">.</span><span class="n">ISO8601Format</span><span class="p">())</span>
            <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</div></code></pre><p>Here we have some view model, in which we want to print the date every 1 second. But when we run this, nothing happens!! This is because of what we talked about earlier. As soon as our <strong>doSomeWork()</strong> scope function ends, our <strong>AnyCancellable</strong> that is returned from sink is deallocated because we did not store it anywhere. One simple change can fix this:</p><pre><code><div class="highlight"><span></span><span class="kd">class</span> <span class="nc">ViewModel</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="kd">var</span> <span class="nv">cancellable</span><span class="p">:</span> <span class="n">AnyCancellable</span><span class="p">?</span>
    <span class="kd">init</span><span class="p">(){}</span>
    
    <span class="kd">func</span> <span class="nf">doSomeWork</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cancellable</span> <span class="p">=</span> <span class="n">Timer</span>
            <span class="p">.</span><span class="n">publish</span><span class="p">(</span><span class="n">every</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">on</span><span class="p">:</span> <span class="n">RunLoop</span><span class="p">.</span><span class="n">main</span><span class="p">,</span> <span class="k">in</span><span class="p">:</span> <span class="p">.</span><span class="k">default</span><span class="p">)</span>
            <span class="p">.</span><span class="n">autoconnect</span><span class="p">()</span>
            <span class="p">.</span><span class="n">sink</span> <span class="p">{</span> <span class="n">date</span> <span class="k">in</span>
                <span class="bp">print</span><span class="p">(</span><span class="n">date</span><span class="p">.</span><span class="n">ISO8601Format</span><span class="p">())</span>
            <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</div></code></pre><p>By assigning our cancellable to a property in our view model, as long as our view model stays alive, our subscription does as well! Neat! One last topic in our Combine 201 article...</p><h2>How to debug with Combine</h2><p>Debugging Combine can be very difficult with long stack traces &amp; confusing/ambiguous messages in our console.</p><h3>Print</h3><p>I gave a preview of one way we can debug in the <a href="/combine/intro-to-combine">Combine 101 Article</a>, but didn't expand upon it. In the previous article we used <strong>print()</strong> to output in our console. We can just add the print operator to our data stream. and Ta-Da! The console will print out the lifecycle of our publisher like so:</p><pre><code><div class="highlight"><span></span><span class="kd">let</span> <span class="nv">publisher</span> <span class="p">=</span> <span class="p">[</span><span class="s">&quot;Cow&quot;</span><span class="p">,</span> <span class="s">&quot;Pig&quot;</span><span class="p">,</span> <span class="s">&quot;Human&quot;</span><span class="p">].</span><span class="n">publisher</span>

<span class="kd">let</span> <span class="nv">_</span> <span class="p">=</span> <span class="n">publisher</span>
    <span class="p">.</span><span class="bp">print</span><span class="p">()</span>
    <span class="p">.</span><span class="n">sink</span><span class="p">(</span><span class="n">receiveValue</span><span class="p">:</span> <span class="p">{</span> <span class="kc">_</span> <span class="k">in</span> <span class="p">})</span>
 
 
<span class="c1">// console:</span>

<span class="c1">// receive subscription: ([&quot;Cow&quot;, &quot;Pig&quot;, &quot;Human&quot;])</span>
<span class="c1">// request unlimited</span>
<span class="c1">// receive value: (Cow)</span>
<span class="c1">// receive value: (Pig)</span>
<span class="c1">// receive value: (Human)</span>
<span class="c1">// receive finished</span>
</div></code></pre><p>Here we can see we receive a subscription, and our request is unlimited (our stream can theoretically stream an infinite # of values). Then our receiveValue closure is called 3 times, once for each of our array values, and we receive a message for when the stream is finished. This is very helpful in case you want to track down the lifecycle of your subscription and if some values are not being received as expected!</p><h3>HandleEvents</h3><p><strong>handleEvents()</strong> is pretty nice because we can handle every possible event our subscription can give us. It has the same events that were printed for the <strong>print()</strong> operator, except this time we can pass custom closures for each event to handle it our own way if desired. Each of these closures are optional so we can only use specific ones for our use case!</p><pre><code><div class="highlight"><span></span><span class="kd">let</span> <span class="nv">publisher</span> <span class="p">=</span> <span class="p">[</span><span class="s">&quot;Cow&quot;</span><span class="p">,</span> <span class="s">&quot;Pig&quot;</span><span class="p">,</span> <span class="s">&quot;Human&quot;</span><span class="p">].</span><span class="n">publisher</span>

<span class="kd">let</span> <span class="nv">_</span> <span class="p">=</span> <span class="n">publisher</span>
    <span class="p">.</span><span class="n">handleEvents</span><span class="p">(</span><span class="n">receiveSubscription</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">subscription</span><span class="p">)</span> <span class="k">in</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Receive subscription </span><span class="si">\(</span><span class="n">subscription</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="p">},</span> <span class="n">receiveOutput</span><span class="p">:</span> <span class="p">{</span> <span class="n">output</span> <span class="k">in</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Received output: </span><span class="si">\(</span><span class="n">output</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="p">},</span> <span class="n">receiveCompletion</span><span class="p">:</span> <span class="p">{</span> <span class="n">completion</span> <span class="k">in</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Receive completion </span><span class="si">\(</span><span class="n">completion</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="p">},</span> <span class="n">receiveCancel</span><span class="p">:</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Receive cancel&quot;</span><span class="p">)</span>
    <span class="p">},</span> <span class="n">receiveRequest</span><span class="p">:</span> <span class="p">{</span> <span class="n">demand</span> <span class="k">in</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&quot;Receive request: </span><span class="si">\(</span><span class="n">demand</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="p">}).</span><span class="n">sink</span><span class="p">(</span><span class="n">receiveValue</span><span class="p">:</span> <span class="p">{</span> <span class="kc">_</span> <span class="k">in</span> <span class="p">})</span>
    
<span class="c1">// console:</span>

<span class="c1">// Receive subscription [&quot;Cow&quot;, &quot;Pig&quot;, &quot;Human&quot;]</span>
<span class="c1">// Receive request: unlimited</span>
<span class="c1">// Received output: Cow</span>
<span class="c1">// Received output: Pig</span>
<span class="c1">// Received output: Human</span>
<span class="c1">// Receive completion finished</span>
</div></code></pre><h3>Breakpoint</h3><p>Swift went above and beyond with this one! We can trigger a breakpoint as an operator within a combine subscription stream. The closure requires to have a Boolean condition, when if the condition is met, we will trigger a breakpoint.</p><pre><code><div class="highlight"><span></span><span class="kd">let</span> <span class="nv">publisher</span> <span class="p">=</span> <span class="p">[</span><span class="s">&quot;Cow&quot;</span><span class="p">,</span> <span class="s">&quot;Pig&quot;</span><span class="p">,</span> <span class="s">&quot;Human&quot;</span><span class="p">].</span><span class="n">publisher</span>

<span class="kd">let</span> <span class="nv">_</span> <span class="p">=</span> <span class="n">publisher</span>
    <span class="p">.</span><span class="n">breakpoint</span><span class="p">(</span><span class="n">receiveOutput</span><span class="p">:</span> <span class="p">{</span> <span class="nv">$0</span> <span class="p">==</span> <span class="s">&quot;Pig&quot;</span> <span class="p">})</span>
    <span class="p">.</span><span class="n">sink</span><span class="p">(</span><span class="n">receiveValue</span><span class="p">:</span> <span class="p">{</span> <span class="kc">_</span> <span class="k">in</span> <span class="p">})</span>
</div></code></pre><p>With this code, when our data stream receives our 2nd value of Pig, Xcode will stop execution for us in the form of a breakpoint. This is because of the closure we passed into the breakpoint operator. This could come in handy!</p><h2>Conclusion</h2><p>We continue to further our skills within Combine. Whether it be how to debug combine errors when we come across them, different operators we can use to manipulate our data stream, and how <strong>AnyCancellable</strong> works under the hood. There is more to learn but we have come a long way!</p></article></main><div class="flex flex-wrap w-full items-center font-sans p-8 md:p-24"><div class="md:flex-1 flex"><img class="w-10 h-10 rounded-full mr-4" src="https://asteezy24.github.io/assets/images/image01.jpg" alt="Alex Stevens"/><div class="flex-1"><p class="text-base font-bold text-base md:text-xl leading-none">Alex Stevens</p><p class="text-gray-600 text-xs md:text-base">iOS Software Engineer</p></div></div><div class="mt-8 md:mt-0 mx-auto md:mx-0 md:justify-end"><a class="bg-transparent border border-gray-500 hover:border-casper-blue text-xs text-gray-500 hover:text-casper-blue font-bold py-2 px-4 rounded-full" href="/tags">All tags</a></div></div></div></div><div class="bg-gray-200"><div class="container w-full max-w-6xl mx-auto px-2 py-8"><div class="grid grid-cols-1 sm:grid-cols-3 gap-12"><div class="w-full  py-6 flex flex-col flex-grow flex-shrink transform transition duration-200 ease-in-out hover:scale-105"><div class="flex-1 bg-white rounded-t rounded-b-none overflow-hidden shadow-lg"><a href="/combine/intro-to-combine" class="flex flex-wrap no-underline hover:no-underline"><p class="w-full text-casper-blue text-xs font-medium pt-6 px-6">SWIFTUI, COMBINE</p><div class="w-full font-bold text-2xl text-gray-900 px-6">Combine 101: Introduction</div><p class="text-gray-800 font-serif text-lg px-6 mb-5">Getting into some reactive programming</p></a></div><div class="flex-none mt-auto bg-white rounded-b rounded-t-none overflow-hidden shadow-lg p-6"><div class="flex items-center justify-between"><img class="w-8 h-8 rounded-full mr-4 avatar" src="https://asteezy24.github.io/assets/images/image01.jpg" alt="Alex Stevens"/><p class="text-gray-600 text-xs md:text-sm">5 MIN READ</p></div></div></div></div></div></div><footer class="bg-gray-900"><div class="container max-w-6xl mx-auto flex items-center px-2 pt-2 pb-8"><div class="w-full mx-auto flex flex-wrap items-center"><div class="flex w-full md:w-1/2 justify-center md:justify-start text-white font-extrabold"><p><a class="text-gray-900 no-underline hover:text-gray-900 hover:no-underline" href="#"><span class="text-base text-gray-200">Swift Refresher</span></a></p></div><div class="flex w-full pt-2 content-center justify-between md:w-1/2 md:justify-end"><ul class="list-reset flex justify-center flex-1 md:flex-none items-center"><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-3 text-sm" href="/">Latest Posts</a></li><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-3 text-sm" href="https://github.com/JohnSundell/Publish">Publish</a></li><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-3 text-sm" href="https://ghost.org">Ghost</a></li><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline px-3 text-sm" href="/feed.rss"><svg class="fill-current h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"></circle><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"></path></svg></a></li></ul></div></div></div></footer></body></html>
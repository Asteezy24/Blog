<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Swift Refresher"/><link rel="canonical" href="https://swiftrefresher.com/home/arrays"/><meta name="twitter:url" content="https://swiftrefresher.com/home/arrays"/><meta name="og:url" content="https://swiftrefresher.com/home/arrays"/><title>Arrays | Swift Refresher</title><meta name="twitter:title" content="Arrays | Swift Refresher"/><meta name="og:title" content="Arrays | Swift Refresher"/><meta name="description" content="Let's get started with Data Structures! Starting with a classic: Arrays."/><meta name="twitter:description" content="Let's get started with Data Structures! Starting with a classic: Arrays."/><meta name="og:description" content="Let's get started with Data Structures! Starting with a classic: Arrays."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Swift Refresher"/></head><body class="bg-white font-sans leading-normal tracking-normal"><div class="pb-16"><nav class="fixed z-10 bg-gray-900 p-4 mt-0 w-full overflow-auto scrolling-touch"><div class="container mx-auto flex items-center"><div class="flex-shrink-0 text-white font-extrabold"><a class="flex text-white text-base no-underline hover:text-white hover:no-underline" href="/"><span class="block md:hidden md:w-auto pl-1">‚ùñ</span><span class="hidden md:block w-0 md:w-auto pl-1">Swift Refresher</span></a></div><div class=" flex flex-no-wrap pl-4 text-sm"><ul class="list-reset flex justify-between items-center"><li class="mr-2"><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-2" href="/">HOME</a></li><li><a class="inline-block py-2 px-2 text-white no-underline hover:underline whitespace-no-wrap" href="/home">MY POSTS</a></li><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-2 whitespace-no-wrap" href="/combine">COMBINE</a></li><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-2 whitespace-no-wrap" href="/SwiftUI">SWIFTUI</a></li><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-2 whitespace-no-wrap" href="/dataStructures">DATASTRUCTURES</a></li><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-2 whitespace-no-wrap" href="/Algorithms">ALGORITHMS</a></li><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-2 whitespace-no-wrap" href="/About">ABOUT</a></li></ul></div></div></nav></div><div class="text-center pt-16 md:pt-32"><p class="text-xs md:text-sm text-casper-blue font-bold">09 DECEMBER 2021<span class="text-gray-900 px-1">/</span><a href="/tags/data-structures">DATA STRUCTURES</a>, <a href="/tags/swift-essentials">SWIFT ESSENTIALS</a></p><h1 class="font-bold break-normal text-3xl md:text-5xl max-w-6xl mx-auto">Arrays</h1></div><div class="container max-w-5xl mx-auto "><div class="mx-0 sm:mx-6"><main class="bg-white w-full p-8 md:p-24 text-gray-800 leading-normal"><article class="prose prose-sm sm:prose-xl break-words"><h1>Arrays</h1><h2>Overview</h2><p>I figured we could start with one of the simplest data structures on our journey. Array's are a swift collection type &amp; they can hold elements of a single type, whether it be Integers, Strings, or Structs/Classes. They are linear collections that are accesible using indexes starting at index Zero.</p><h2>Array's in Memory</h2><p>Swift arrays come in 2 different variations depending on how you initialize them:</p><p>Static arrays are an array implementation in which the size of the array is determined on initialization. Under the hood, the machine will allocate a fixed amount of memory to store this initialized array. Which is nice! But comes at a cost. In order to append values, the machine will copy the entire array over, and allocate new memory space for it + the new value you want to add. This is a linear operation.</p><p>Dynamic arrays are an array implementation that preemptively allocates DOUBLE the memory needed to store the arrays values. Therefore when you want to append a new value, that operation is constant time due to the already free space available to add the value into memory. When all the extra free space is filled up, the array is copied and stored elsewhere. This operation is Amortized constant time, when inserting at the end of the array.</p><h2>Under the hood Swift Implementation</h2><p>When looking through the swift source code on arrays, you will see the underlying implementation of arrays uses Structs. This means arrays are value types, and whenever you copy an array over to a new variable, the value of the array is copied and stored in a new memory address. Any changes to this copied variable will not affect the original array. For example:</p><pre><code><span class="keyword">var</span> originalArray = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]
<span class="keyword">var</span> copyArray = originalArray
copyArray.<span class="call">append</span>(<span class="number">4</span>)

<span class="call">print</span>(originalArray) <span class="comment">// [1, 2, 3]</span>
<span class="call">print</span>(copyArray) <span class="comment">// [1, 2, 3, 4]</span>

</code></pre><p>To be even more efficient, Swift uses copy-on-write optimization for arrays. This means copies of arrays are stored at the same memory address until one of the copies is mutated. Then the array is stored into a new memory address. Keep this in mind when writing efficient code, because in swift copying the array over a bunch is not the time consuming event. The mutation of the copy is what will cost you in Big O time.</p><h2>Big O operations on Arrays</h2><ul><li>Accessing value at an index <strong>O(1)</strong></li><li>Update value at an index <strong>O(1)</strong></li><li>Insert value at beginning <strong>O(n)</strong></li><li>Insert value at middle <strong>O(n)</strong></li><li>Insert value at end:<ul><li>Dynamic arrays: Amortized <strong>O(1)</strong></li><li>Static arrays: <strong>O(n)</strong></li></ul></li></ul><ul><li>Remove value at beginning <strong>O(n)</strong></li><li>Remove value at middle <strong>O(n)</strong></li><li>Remove value at end <strong>O(1)</strong></li><li>Copy array <strong>O(n)</strong></li></ul><h2>Array Declarations</h2><p>Arrays are very easy to declare (dynamic arrays):</p><pre><code><span class="keyword">let</span> arrayOne = [<span class="type">String</span>]()
<span class="keyword">let</span> arrayTwo: [<span class="type">Int</span>] = []
<span class="keyword">let</span> arrayThree = [<span class="type">CustomObjectOne</span>, <span class="type">CustomObjectTwo</span>]
</code></pre><p>The swift compiler does some really cool things under the hood to infer the underlying type based on how you declare the variable.</p><p>You can also determine the size of the array &amp; repeated values of the array on variable declaration like so (static array):</p><pre><code><span class="keyword">let</span> arrayFour = <span class="type">Array</span>(repearing: <span class="string">"Four"</span> count: <span class="number">6</span>) <span class="comment">// ["Four", "Four", "Four", "Four", "Four", "Four"]</span>
</code></pre><h2>Operations on Arrays</h2><p>Inserting elements in arrays is simple, there are a couple main API's depending on your use case:</p><pre><code>arrayFive.<span class="call">append</span>(<span class="number">8</span>) <span class="comment">// at to the end</span>
arrayFive.<span class="call">append</span>(contentsOf: [<span class="number">0</span>, <span class="number">7</span>]) <span class="comment">// add a sequence
// [1, 2, 8, 0, 7]</span>

arrayFive.<span class="call">insert</span>(<span class="number">9</span>, at: <span class="number">3</span>) <span class="comment">// 0-based index
// [1, 2, 8, 9, 0, 7]</span>
</code></pre><p>Here is how to delete elements in an array:</p><pre><code>arrayFive.<span class="call">removeFirst</span>()
arrayFive.<span class="call">removeLast</span>()
<span class="comment">// [2, 8, 9, 0]</span>

arrayFive.<span class="call">remove</span>(at: <span class="number">0</span>) 
<span class="comment">// remove index 0
// [8, 9, 0]</span>
</code></pre><p>By accessing an element on an array you can substitute the value in place:</p><pre><code><span class="keyword">if let</span> element = arrayFive.<span class="call">firstIndex</span>(of: <span class="number">8</span>) {
    arrayFive[element] = <span class="number">9</span>
}
<span class="comment">// [9, 9, 0]</span>
</code></pre><h2>Higher Order Functions</h2><ol><li>The first higher order function is Sort. Say you have a collection of elements in the form of an array, and you want to sort these elements by some sort of predicate. The swift collection type comes with the built in sorted by function. This function returns a new array from your desired sorting mechanism. For example:</li></ol><pre><code><span class="keyword">func</span> sorted(by: (<span class="type">Base</span>.<span class="type">Element</span>, <span class="type">Base</span>.<span class="type">Element</span>) <span class="keyword">throws</span> -&gt; <span class="type">Bool</span>) <span class="keyword">rethrows</span> -&gt; [<span class="type">Base</span>.<span class="type">Element</span>] 
</code></pre><p>The sorted by function takes a predicate in which you can define how to sort your elements.</p><pre><code><span class="keyword">struct</span> FooStruct {
    <span class="keyword">var</span> value: <span class="type">Int</span>
}

<span class="keyword">var</span> nonSortedArray = [<span class="type">FooStruct</span>(value: <span class="number">15</span>), <span class="type">FooStruct</span>(value: <span class="number">3</span>), <span class="type">FooStruct</span>(value: <span class="number">9</span>)]
<span class="comment">// Trailing closure notation</span>
<span class="keyword">var</span> sortedArrayOne = nonSortedArray.<span class="dotAccess">sorted</span> (a, b) -&gt; <span class="type">Bool</span> <span class="keyword">in</span> {
    <span class="keyword">return</span> a.<span class="property">value</span> &lt; b.<span class="property">value</span>
}
<span class="comment">// Shorthand notation</span>
<span class="keyword">var</span> sortedArrayTwo = nonSortedArray.<span class="call">sorted</span> { $0.<span class="property">value</span> &lt; $1.<span class="property">value</span> }

<span class="call">print</span>(sortedArrayTwo) <span class="comment">// [FooStruct(value: 3), FooStruct(value: 9), FooStruct(value: 15)]</span> 
</code></pre><ol start="2"><li>Another higher order function is Map. The main purpose of Map is to iterate on every element in the array, but instead of sorting the elements, you can transform each element based on a closure you pass into it. Here is the underlying implementation:</li></ol><pre><code><span class="keyword">func</span> map&lt;T&gt;(<span class="keyword">_</span> transform: (<span class="type">Self</span>.<span class="type">Element</span>) <span class="keyword">throws</span> -&gt; <span class="type">T</span>) <span class="keyword">rethrows</span> -&gt; [<span class="type">T</span>]
</code></pre><p>Given the return type of the map function is T, we can pass in one type of array, and return a different type of array. For example taking in an array of numbers, mapping over them, and returning that array represented in String form.</p><pre><code><span class="keyword">let</span> newArray = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="call">map</span> { (item) -&gt; <span class="type">String</span>
    <span class="keyword">return</span> <span class="type">String</span>(item)
}
</code></pre><ol start="3"><li>A very common, and frequently used higher order function is Filter. You can specify a filter in the form of a closure, and you can filter an array given your criteria.</li></ol><pre><code><span class="keyword">func</span> filter(<span class="keyword">_</span> isIncluded: <span class="keyword">@escaping</span> (<span class="type">Self</span>.<span class="type">Elements</span>.<span class="type">Element</span>) -&gt; <span class="type">Bool</span>) -&gt; <span class="type">LazyFilterSequence</span>&lt;<span class="type">Self</span>.<span class="type">Elements</span>&gt;
</code></pre><p>For example lets get all numbers from our array that are greater than 1.</p><pre><code><span class="keyword">let</span> filteredArray = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].map{ (item) -&gt; <span class="type">Bool</span> <span class="keyword">in
    return</span> item &gt; <span class="number">1</span>
}

</code></pre><ol start="4"><li>Perhaps the hardest to grasp higher order function is Reduce. This function allows us to combine all the elements in a collection, and return a unified common (and also generic) type!</li></ol><pre><code><span class="keyword">func</span> reduce&lt;Result&gt;(<span class="keyword">_</span> initialResult: <span class="type">Result</span>, <span class="keyword">_</span> nextPartialResult: (<span class="type">Result</span>, <span class="type">Bound</span>) <span class="keyword">throws</span> -&gt; <span class="type">Result</span>) <span class="keyword">rethrows</span> -&gt; <span class="type">Result</span>
</code></pre><p>Lets say we want to take all of our numbers in an array, and combine them into a single long String.</p><pre><code><span class="comment">// Long version</span>
<span class="keyword">let</span> reduced = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>].<span class="call">reduce</span>(<span class="string">""</span>) {(result, item) -&gt; <span class="type">String</span> <span class="keyword">in 
    return</span> result + <span class="type">String</span>(item)
}
<span class="comment">// Inline version</span>
<span class="keyword">let</span> reduced = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>].<span class="call">reduce</span>(<span class="string">""</span>) { $0 + <span class="type">String</span>($1) }

</code></pre><h3>Leetcode Patterns to look out for</h3></article></main><div class="flex flex-wrap w-full items-center font-sans p-8 md:p-24"><div class="md:flex-1 flex"><img class="w-10 h-10 rounded-full mr-4" src="http://i.pravatar.cc/300" alt="Alex Stevens"/><div class="flex-1"><p class="text-base font-bold text-base md:text-xl leading-none">Alex Stevens</p><p class="text-gray-600 text-xs md:text-base">iOS Enthusiast</p></div></div><div class="mt-8 md:mt-0 mx-auto md:mx-0 md:justify-end"><a class="bg-transparent border border-gray-500 hover:border-casper-blue text-xs text-gray-500 hover:text-casper-blue font-bold py-2 px-4 rounded-full" href="/tags">All tags</a></div></div></div></div><div class="bg-gray-200"><div class="container w-full max-w-6xl mx-auto px-2 py-8"><div class="grid grid-cols-1 sm:grid-cols-3 gap-12"><div class="w-full  py-6 flex flex-col flex-grow flex-shrink transform transition duration-200 ease-in-out hover:scale-105"><div class="flex-1 bg-white rounded-t rounded-b-none overflow-hidden shadow-lg"><a href="/home/first-post" class="flex flex-wrap no-underline hover:no-underline"><p class="w-full text-casper-blue text-xs font-medium pt-6 px-6">ABOUT ME</p><div class="w-full font-bold text-2xl text-gray-900 px-6">About myself!</div><p class="text-gray-800 font-serif text-lg px-6 mb-5">Why I chose to create a Swift blog.</p></a></div><div class="flex-none mt-auto bg-white rounded-b rounded-t-none overflow-hidden shadow-lg p-6"><div class="flex items-center justify-between"><img class="w-8 h-8 rounded-full mr-4 avatar" src="http://i.pravatar.cc/300" alt="Alex Stevens"/><p class="text-gray-600 text-xs md:text-sm">1 MIN READ</p></div></div></div></div></div></div><footer class="bg-gray-900"><div class="container max-w-6xl mx-auto flex items-center px-2 pt-2 pb-8"><div class="w-full mx-auto flex flex-wrap items-center"><div class="flex w-full md:w-1/2 justify-center md:justify-start text-white font-extrabold"><p><a class="text-gray-900 no-underline hover:text-gray-900 hover:no-underline" href="#"><span class="text-base text-gray-200">Swift Refresher</span></a></p></div><div class="flex w-full pt-2 content-center justify-between md:w-1/2 md:justify-end"><ul class="list-reset flex justify-center flex-1 md:flex-none items-center"><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-3 text-sm" href="/">Latest Posts</a></li><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-3 text-sm" href="https://github.com/JohnSundell/Publish">Publish</a></li><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline py-2 px-3 text-sm" href="https://ghost.org">Ghost</a></li><li><a class="inline-block text-gray-600 no-underline hover:text-gray-200 hover:underline px-3 text-sm" href="/feed.rss"><svg class="fill-current h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"></circle><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"></path></svg></a></li></ul></div></div></div></footer></body></html>